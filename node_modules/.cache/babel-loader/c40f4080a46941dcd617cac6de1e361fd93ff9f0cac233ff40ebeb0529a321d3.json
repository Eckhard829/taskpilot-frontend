{"ast":null,"code":"import React,{useState,useEffect}from'react';import TaskForm from'./TaskForm';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const WorkerList=()=>{const[workers,setWorkers]=useState([]);const[expandedWorker,setExpandedWorker]=useState(null);const[loading,setLoading]=useState(true);const fetchWorkers=async()=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/users\"),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});if(response.ok){const data=await response.json();setWorkers(data);}else{console.error('Failed to fetch workers');alert('Failed to fetch workers. Please try again.');}}catch(error){console.error('Error fetching workers:',error);alert('Error fetching workers: '+error.message);}finally{setLoading(false);}};useEffect(()=>{fetchWorkers();},[]);const handleExpand=workerId=>{setExpandedWorker(expandedWorker===workerId?null:workerId);};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Workers\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:\"Loading workers...\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Workers\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary btn-sm\",onClick:fetchWorkers,disabled:loading,children:\"Refresh\"})]}),workers.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),\"No workers found. Create some worker accounts first using the \\\"Create New User\\\" option in the sidebar.\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[workers.length,\" worker\",workers.length!==1?'s':'',\" available\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:workers.map(worker=>/*#__PURE__*/_jsxs(\"div\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-1\",children:worker.name}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-envelope me-1\"}),worker.email]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-calendar-plus me-1\"}),\"Joined: \",new Date(worker.createdAt).toLocaleDateString()]})})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm \".concat(expandedWorker===worker.id?'btn-outline-secondary':'btn-primary'),onClick:()=>handleExpand(worker.id),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi \".concat(expandedWorker===worker.id?'bi-x-lg':'bi-plus-lg',\" me-1\")}),expandedWorker===worker.id?'Cancel':'Assign Task']})]}),expandedWorker===worker.id&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(TaskForm,{workerId:worker.id,workerEmail:worker.email,onTaskAssigned:()=>{setExpandedWorker(null);// Optionally refresh workers list or show success\n}})})]},worker.id))})]})]});};export default WorkerList;","map":{"version":3,"names":["React","useState","useEffect","TaskForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","WorkerList","workers","setWorkers","expandedWorker","setExpandedWorker","loading","setLoading","fetchWorkers","response","fetch","concat","process","env","REACT_APP_API_URL","headers","localStorage","getItem","ok","data","json","console","error","alert","message","handleExpand","workerId","className","children","role","onClick","disabled","length","map","worker","name","email","Date","createdAt","toLocaleDateString","id","workerEmail","onTaskAssigned"],"sources":["C:/Users/USER-PC/Desktop/TaskPilot/frontend/src/components/WorkerList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport TaskForm from './TaskForm';\r\n\r\nconst WorkerList = () => {\r\n  const [workers, setWorkers] = useState([]);\r\n  const [expandedWorker, setExpandedWorker] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchWorkers = async () => {\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/users`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setWorkers(data);\r\n      } else {\r\n        console.error('Failed to fetch workers');\r\n        alert('Failed to fetch workers. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching workers:', error);\r\n      alert('Error fetching workers: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchWorkers();\r\n  }, []);\r\n\r\n  const handleExpand = (workerId) => {\r\n    setExpandedWorker(expandedWorker === workerId ? null : workerId);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-3\">\r\n        <h2>Workers</h2>\r\n        <div className=\"text-center\">\r\n          <div className=\"spinner-border\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n          <div className=\"mt-2\">Loading workers...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-3\">\r\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n        <h2>Workers</h2>\r\n        <button \r\n          className=\"btn btn-outline-primary btn-sm\" \r\n          onClick={fetchWorkers}\r\n          disabled={loading}\r\n        >\r\n          Refresh\r\n        </button>\r\n      </div>\r\n      \r\n      {workers.length === 0 ? (\r\n        <div className=\"alert alert-warning\">\r\n          <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n          No workers found. Create some worker accounts first using the \"Create New User\" option in the sidebar.\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"mb-3\">\r\n            <small className=\"text-muted\">\r\n              {workers.length} worker{workers.length !== 1 ? 's' : ''} available\r\n            </small>\r\n          </div>\r\n          <div className=\"list-group\">\r\n            {workers.map(worker => (\r\n              <div key={worker.id} className=\"list-group-item\">\r\n                <div className=\"d-flex justify-content-between align-items-center\">\r\n                  <div>\r\n                    <h5 className=\"mb-1\">{worker.name}</h5>\r\n                    <small className=\"text-muted\">\r\n                      <i className=\"bi bi-envelope me-1\"></i>\r\n                      {worker.email}\r\n                    </small>\r\n                    <div className=\"mt-1\">\r\n                      <small className=\"text-muted\">\r\n                        <i className=\"bi bi-calendar-plus me-1\"></i>\r\n                        Joined: {new Date(worker.createdAt).toLocaleDateString()}\r\n                      </small>\r\n                    </div>\r\n                  </div>\r\n                  <button \r\n                    className={`btn btn-sm ${expandedWorker === worker.id ? 'btn-outline-secondary' : 'btn-primary'}`}\r\n                    onClick={() => handleExpand(worker.id)}\r\n                  >\r\n                    <i className={`bi ${expandedWorker === worker.id ? 'bi-x-lg' : 'bi-plus-lg'} me-1`}></i>\r\n                    {expandedWorker === worker.id ? 'Cancel' : 'Assign Task'}\r\n                  </button>\r\n                </div>\r\n                \r\n                {expandedWorker === worker.id && (\r\n                  <div className=\"mt-3\">\r\n                    <TaskForm \r\n                      workerId={worker.id}\r\n                      workerEmail={worker.email}\r\n                      onTaskAssigned={() => {\r\n                        setExpandedWorker(null);\r\n                        // Optionally refresh workers list or show success\r\n                      }}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkerList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}