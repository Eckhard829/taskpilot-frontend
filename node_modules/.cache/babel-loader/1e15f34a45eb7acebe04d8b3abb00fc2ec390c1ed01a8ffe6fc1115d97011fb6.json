{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CompletedWork=()=>{const[approvedWork,setApprovedWork]=useState([]);const[loading,setLoading]=useState(true);const fetchApprovedWork=async()=>{try{const response=await fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/work\"),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});if(response.ok){const data=await response.json();const approvedTasks=data.filter(task=>task.status==='approved');setApprovedWork(approvedTasks);}else{console.error('Error fetching approved work');alert('Error fetching approved work');}}catch(error){console.error('Error fetching approved work:',error);alert('Error fetching approved work: '+error.message);}finally{setLoading(false);}};useEffect(()=>{fetchApprovedWork();},[]);const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString()+' at '+date.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});};if(loading){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-gold mb-4\",children:\"Completed Work\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-gold\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:\"Loading completed work...\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-gold\",children:\"Completed Work\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary btn-sm\",onClick:fetchApprovedWork,disabled:loading,children:\"Refresh\"})]}),approvedWork.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),\"No completed and approved work found.\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:approvedWork.map(task=>{var _task$worker,_task$worker2,_task$reviewedByUser,_task$reviewedByUser2;return/*#__PURE__*/_jsx(\"div\",{className:\"list-group-item bg-light border-gold\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-2\",children:task.task}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-gold\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 p-2 bg-light rounded border-left-gold\",children:task.description})]}),task.instructions&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-gold\",children:\"Instructions:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 p-2 bg-light rounded border-left-gold\",children:task.instructions})]}),task.explanation&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-gold\",children:\"Worker's Notes:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 p-2 bg-light rounded border-left-gold\",children:task.explanation})]}),task.workLink&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-gold\",children:\"Work Link:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsxs(\"a\",{href:task.workLink,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-gold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-link-45deg me-1\"}),task.workLink]})})]}),task.reviewNotes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-gold\",children:\"Review Notes:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 p-2 bg-light rounded border-left-gold\",children:task.reviewNotes})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted\",children:[/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person me-1\"}),\"Worker: \",(_task$worker=task.worker)===null||_task$worker===void 0?void 0:_task$worker.name,\" (\",(_task$worker2=task.worker)===null||_task$worker2===void 0?void 0:_task$worker2.email,\")\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-calendar-check me-1\"}),\"Approved: \",formatDate(task.reviewedAt)]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-gear me-1\"}),\"Reviewed by: \",(_task$reviewedByUser=task.reviewedByUser)===null||_task$reviewedByUser===void 0?void 0:_task$reviewedByUser.name,\" (\",(_task$reviewedByUser2=task.reviewedByUser)===null||_task$reviewedByUser2===void 0?void 0:_task$reviewedByUser2.email,\")\"]})]})]})})},task.id);})})]});};export default CompletedWork;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","CompletedWork","approvedWork","setApprovedWork","loading","setLoading","fetchApprovedWork","response","fetch","concat","process","env","REACT_APP_API_URL","headers","localStorage","getItem","ok","data","json","approvedTasks","filter","task","status","console","error","alert","message","formatDate","dateString","date","Date","toLocaleDateString","toLocaleTimeString","hour","minute","children","className","role","onClick","disabled","length","map","_task$worker","_task$worker2","_task$reviewedByUser","_task$reviewedByUser2","description","instructions","explanation","workLink","href","target","rel","reviewNotes","worker","name","email","reviewedAt","reviewedByUser","id"],"sources":["C:/Users/USER-PC/Desktop/TaskPilot/frontend/src/components/CompletedWork.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst CompletedWork = () => {\r\n  const [approvedWork, setApprovedWork] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchApprovedWork = async () => {\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/work`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const approvedTasks = data.filter(task => task.status === 'approved');\r\n        setApprovedWork(approvedTasks);\r\n      } else {\r\n        console.error('Error fetching approved work');\r\n        alert('Error fetching approved work');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching approved work:', error);\r\n      alert('Error fetching approved work: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchApprovedWork();\r\n  }, []);\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString() + ' at ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div>\r\n        <h2 className=\"text-gold mb-4\">Completed Work</h2>\r\n        <div className=\"text-center\">\r\n          <div className=\"spinner-border text-gold\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n          <div className=\"mt-2\">Loading completed work...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n        <h2 className=\"text-gold\">Completed Work</h2>\r\n        <button \r\n          className=\"btn btn-outline-primary btn-sm\" \r\n          onClick={fetchApprovedWork}\r\n          disabled={loading}\r\n        >\r\n          Refresh\r\n        </button>\r\n      </div>\r\n\r\n      {approvedWork.length === 0 ? (\r\n        <div className=\"alert alert-warning\">\r\n          <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n          No completed and approved work found.\r\n        </div>\r\n      ) : (\r\n        <div className=\"list-group\">\r\n          {approvedWork.map(task => (\r\n            <div key={task.id} className=\"list-group-item bg-light border-gold\">\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h5 className=\"mb-2\">{task.task}</h5>\r\n                  <div className=\"mb-2\">\r\n                    <strong className=\"text-gold\">Description:</strong>\r\n                    <div className=\"mt-1 p-2 bg-light rounded border-left-gold\">\r\n                      {task.description}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {task.instructions && (\r\n                    <div className=\"mb-2\">\r\n                      <strong className=\"text-gold\">Instructions:</strong>\r\n                      <div className=\"mt-1 p-2 bg-light rounded border-left-gold\">\r\n                        {task.instructions}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {task.explanation && (\r\n                    <div className=\"mb-2\">\r\n                      <strong className=\"text-gold\">Worker's Notes:</strong>\r\n                      <div className=\"mt-1 p-2 bg-light rounded border-left-gold\">\r\n                        {task.explanation}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {task.workLink && (\r\n                    <div className=\"mb-2\">\r\n                      <strong className=\"text-gold\">Work Link:</strong>\r\n                      <div className=\"mt-1\">\r\n                        <a \r\n                          href={task.workLink} \r\n                          target=\"_blank\" \r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-gold\"\r\n                        >\r\n                          <i className=\"bi bi-link-45deg me-1\"></i>\r\n                          {task.workLink}\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {task.reviewNotes && (\r\n                    <div className=\"mb-2\">\r\n                      <strong className=\"text-gold\">Review Notes:</strong>\r\n                      <div className=\"mt-1 p-2 bg-light rounded border-left-gold\">\r\n                        {task.reviewNotes}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"text-muted\">\r\n                    <small>\r\n                      <i className=\"bi bi-person me-1\"></i>\r\n                      Worker: {task.worker?.name} ({task.worker?.email})\r\n                    </small>\r\n                    <br />\r\n                    <small>\r\n                      <i className=\"bi bi-calendar-check me-1\"></i>\r\n                      Approved: {formatDate(task.reviewedAt)}\r\n                    </small>\r\n                    <br />\r\n                    <small>\r\n                      <i className=\"bi bi-person-gear me-1\"></i>\r\n                      Reviewed by: {task.reviewedByUser?.name} ({task.reviewedByUser?.email})\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompletedWork;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}